<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Roll / Pitch / Yaw 표시</title>
  <style>
    body {
      background: #111;
      color: #0f0;
      font-family: monospace;
      font-size: 1.5rem;
      padding: 2rem;
    }
    h1 {
      font-size: 2rem;
      color: #fff;
    }
    .angle {
      margin: 1rem 0;
    }
  </style>
</head>
<body>
  <h1>Device Orientation</h1>
  <div class="angle">Yaw (alpha): <span id="yaw">0</span>°</div>
  <div class="angle">Pitch (beta): <span id="pitch">0</span>°</div>
  <div class="angle">Roll (gamma): <span id="roll">0</span>°</div>

  <script>
    function updateAngles(event) {
      const yaw = event.alpha ?? 0;   // Z축 회전 (방향)
      const pitch = event.beta ?? 0;  // X축 회전 (앞뒤)
      const roll = event.gamma ?? 0;  // Y축 회전 (좌우)

      document.getElementById('yaw').textContent = yaw.toFixed(1);
      document.getElementById('pitch').textContent = pitch.toFixed(1);
      document.getElementById('roll').textContent = roll.toFixed(1);
    }

    // iOS 13+의 권한 요청 처리
    if (typeof DeviceOrientationEvent !== 'undefined' &&
        typeof DeviceOrientationEvent.requestPermission === 'function') {
      // iOS
      const button = document.createElement('button');
      button.innerText = '센서 사용 허용';
      button.style.padding = '1rem';
      button.onclick = () => {
        DeviceOrientationEvent.requestPermission().then(response => {
          if (response === 'granted') {
            window.addEventListener('deviceorientation', updateAngles);
            button.remove();
          }
        }).catch(console.error);
      };
      document.body.appendChild(button);
    } else {
      // Android or iOS 12 이하
      window.addEventListener('deviceorientation', updateAngles);
    }
  </script>
</body>
</html>